#### 7.16 플라이웨이트 패턴

- 플라이 웨이트 패턴을 이용해서 데이터를 내부상태와 외부상태로 분리
- 고유한 내부 데이터에 대한 하나의 복사본만 생성되는 팩토리를 생성해서 내부 상태 클래스 최적화
- 플라이 웨이트 패턴을 사용하게 되면 함수들이 모든 객체에 존재하는 것이 아니라 관리자 내부에 한번만 존재하게 되어 메모리 최적화 가능

> class에 플라이웨이트 패턴을 적용해서 사용하는 것이 유의미한 메모리 최적화일까 궁금합니다. 관리 복잡성이 늘어 날 경우도 있을 거라고 생각됩니다. 외부 상태의 변화가 빈번하게 발생하는 경우, 이 패턴이 오히려 유지보수를 어렵게 할 수 있어 보입니다.

```javascript
class TreeType1 {
  constructor(type, color, texture) {
    this.type = type; // 내부 상태
    this.color = color; // 내부 상태
    this.texture = texture; // 내부 상태
  }
}

class TreeType2 {
  constructor(type, color, texture) {
    this.type = type; // 다른 내부 상태
    this.color = color; // 다른 내부 상태
    this.texture = texture; // 다른 내부 상태
  }
}
```

- 다른 생성자(constructor)를 사용하여 10개의 객체를 생성할 때, 생성된 객체들이 서로 다른 내부 상태를 가지면 플라이웨이트 패턴의 이점이 줄어들 수 있습니다. 하지만, 내부 상태가 유사하거나 공유 가능하다면 플라이웨이트 패턴은 여전히 메모리 최적화를 제공할 수 있습니다.

- 이 경우, 각 생성자에서 고유한 객체들이 생성되며, 내부 상태가 공유되지 않기 때문에 메모리 최적화 효과는 없습니다. 각각의 생성자에서 객체를 개별적으로 관리하게 되어, 중복된 내부 상태를 공유할 수 없기 때문입니다.

- 다른 생성자를 10번 사용하여 객체를 생성할 때, 내부 상태가 서로 다르고 공유할 수 없다면, 플라이웨이트 패턴의 메모리 최적화 효과는 거의 없습니다.
  하지만, 공유 가능한 내부 상태가 있다면, 이를 플라이웨이트 패턴으로 관리할 경우 메모리 최적화 효과가 발생할 수 있습니다.
  즉, 최적화가 되는지는 내부 상태의 공유 여부에 달려 있습니다. 주로 대규모 객체를 생성하고 관리할 때 사용되며, UI 컴포넌트, 게임의 캐릭터, 문자열 처리( 텍스트 파일을 읽어들이거나, 자연어 처리 애플리케이션을 개발) 등에서 효과적입니다.

> 플라이 웨이트 페턴이 유의미한 사례가 어떤 경우가 있을까요? 🤔
